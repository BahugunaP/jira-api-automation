# create a virtula environment 
python -m venv venv

# Activate virual environment 
source venv/bin/activate

# Install required packeages: 
pip install jira python-dotenv
pip install python-dotenv 
pip install requests python-dotenv PyYAML loguru

# Getting Access Code 
https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=U92JlnW54mBV05LxkgEOE3AAP0Wgob6Q&scope=write%3Ajira-work%20read%3Ajira-work%20offline_access&redirect_uri=http%3A%2F%2Flocalhost%3A8000%2Fcallback&state=${YOUR_USER_BOUND_VALUE}&response_type=code&prompt=consent

# Getting Access Token and Refresh Token 
$body = @{
    grant_type    = "authorization_code"
    client_id     = "U92JlnW54mBV05LxkgEOE3AAP0Wgob6Q"
    client_secret = "ATOA9BlU1xuQStpySAIfaMHcoecZ5_BT0y-60ixvmQO4G8AjWcSRjA_0wEH2e82OCwOB9EE39A06"
    code          = "eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI5NzJkMDdiMS1hMWNmLTQ5NDktODM0YS03YmM3MWE2YTZlMzQiLCJzdWIiOiI3MTIwMjA6OWZlYTExNjMtYTI2MC00YmZkLTk0MWQtOTI2MmQ1NzBiOGRiIiwibmJmIjoxNzM5NTQ4MzY1LCJpc3MiOiJhdXRoLmF0bGFzc2lhbi5jb20iLCJpYXQiOjE3Mzk1NDgzNjUsImV4cCI6MTczOTU0ODY2NSwiYXVkIjoiVTkySmxuVzU0bUJWMDVMeGtnRU9FM0FBUDBXZ29iNlEiLCJjbGllbnRfYXV0aF90eXBlIjoiUE9TVCIsImh0dHBzOi8vaWQuYXRsYXNzaWFuLmNvbS92ZXJpZmllZCI6dHJ1ZSwiaHR0cHM6Ly9pZC5hdGxhc3NpYW4uY29tL3VqdCI6Ijk3MmQwN2IxLWExY2YtNDk0OS04MzRhLTdiYzcxYTZhNmUzNCIsInNjb3BlIjpbInJlYWQ6amlyYS13b3JrIiwib2ZmbGluZV9hY2Nlc3MiLCJ3cml0ZTpqaXJhLXdvcmsiXSwiaHR0cHM6Ly9pZC5hdGxhc3NpYW4uY29tL2F0bF90b2tlbl90eXBlIjoiQVVUSF9DT0RFIiwiaHR0cHM6Ly9pZC5hdGxhc3NpYW4uY29tL2hhc1JlZGlyZWN0VXJpIjp0cnVlLCJodHRwczovL2lkLmF0bGFzc2lhbi5jb20vc2Vzc2lvbl9pZCI6ImJmNzJmYjE4LTg1ZjItNDhmYy1hOTUyLTQ5N2JiYTU2ODQxNSIsImh0dHBzOi8vaWQuYXRsYXNzaWFuLmNvbS9wcm9jZXNzUmVnaW9uIjoidXMtZWFzdC0xIn0.rYPsBIyT4KadUM6lfkJuL2HWOefTB7kw4MLU4m0WqsQ"
    redirect_uri  = "http://localhost:8000/callback"
} | ConvertTo-Json -Compress

$response = Invoke-RestMethod -Uri "https://auth.atlassian.com/oauth/token" `
                  -Method Post `
                  -Headers @{"Content-Type"="application/json"} `
                  -Body $body

$accessToken = $response.access_token
$refreshToken = $response.refresh_token
Write-Output "Access Token: $accessToken"
Write-Output "Refresh Token: $refreshToken"

# JIRA_CLOUD_ID
$accessToken = "eyJraWQiOiJhdXRoLmF0bGFzc2lhbi5jb20tQUNDRVNTLTk0ZTczYTkwLTUxYWQtNGFjMS1hOWFjLWU4NGUwNDVjNDU3ZCIsImFsZyI6IlJTMjU2In0.eyJqdGkiOiJkYjZhNjRiYS1lZGY3LTQ0MGYtOWY4OS1mZDBjYjAxYzQyMjQiLCJzdWIiOiI3MTIwMjA6OWZlYTExNjMtYTI2MC00YmZkLTk0MWQtOTI2MmQ1NzBiOGRiIiwibmJmIjoxNzM5NTQ0MDAzLCJpc3MiOiJodHRwczovL2F1dGguYXRsYXNzaWFuLmNvbSIsImlhdCI6MTczOTU0NDAwMywiZXhwIjoxNzM5NTQ3NjAzLCJhdWQiOiJVOTJKbG5XNTRtQlYwNUx4a2dFT0UzQUFQMFdnb2I2USIsImh0dHBzOi8vaWQuYXRsYXNzaWFuLmNvbS9yZWZyZXNoX2NoYWluX2lkIjoiVTkySmxuVzU0bUJWMDVMeGtnRU9FM0FBUDBXZ29iNlEtNzEyMDIwOjlmZWExMTYzLWEyNjAtNGJmZC05NDFkLTkyNjJkNTcwYjhkYi03ZTI1OTNkZi1jZmM0LTQwZTItOTVmMy00ZWU5M2QwMmY2YmUiLCJodHRwczovL2F0bGFzc2lhbi5jb20vc3lzdGVtQWNjb3VudElkIjoiNzEyMDIwOmMxMGU2ZDJjLTMyYWUtNGJkYy05MjY2LWJjZjRiYmU4NjkxYSIsImh0dHBzOi8vaWQuYXRsYXNzaWFuLmNvbS91anQiOiI3MmU4ODZjZC04NzFlLTQ2NmItYjcwMC0xOTllYTVmY2QyZjQiLCJzY29wZSI6InJlYWQ6amlyYS13b3JrIG9mZmxpbmVfYWNjZXNzIHdyaXRlOmppcmEtd29yayIsImh0dHBzOi8vYXRsYXNzaWFuLmNvbS9vcmdJZCI6IjdjODQ3NTVhLTFiNWMtNDI4NS04YmIxLWIzMmExZGE0NmZjNSIsImh0dHBzOi8vaWQuYXRsYXNzaWFuLmNvbS9hdGxfdG9rZW5fdHlwZSI6IkFDQ0VTUyIsImh0dHBzOi8vYXRsYXNzaWFuLmNvbS9maXJzdFBhcnR5IjpmYWxzZSwiaHR0cHM6Ly9hdGxhc3NpYW4uY29tL3N5c3RlbUFjY291bnRFbWFpbCI6IjFlMDhlODZmLTg3ODAtNDM1ZC05OTVkLWZjY2Y1MmI0OTZhY0Bjb25uZWN0LmF0bGFzc2lhbi5jb20iLCJodHRwczovL2F0bGFzc2lhbi5jb20vdmVyaWZpZWQiOnRydWUsImNsaWVudF9pZCI6IlU5Mkpsblc1NG1CVjA1THhrZ0VPRTNBQVAwV2dvYjZRIiwiaHR0cHM6Ly9pZC5hdGxhc3NpYW4uY29tL3Byb2Nlc3NSZWdpb24iOiJ1cy1lYXN0LTEiLCJodHRwczovL2F0bGFzc2lhbi5jb20vZW1haWxEb21haW4iOiJpbnRlbGxpc3dpZnQuY29tIiwiaHR0cHM6Ly9pZC5hdGxhc3NpYW4uY29tL3Nlc3Npb25faWQiOiJiZjcyZmIxOC04NWYyLTQ4ZmMtYTk1Mi00OTdiYmE1Njg0MTUiLCJodHRwczovL2F0bGFzc2lhbi5jb20vM2xvIjp0cnVlLCJodHRwczovL2lkLmF0bGFzc2lhbi5jb20vdmVyaWZpZWQiOnRydWUsImh0dHBzOi8vYXRsYXNzaWFuLmNvbS9vYXV0aENsaWVudElkIjoiVTkySmxuVzU0bUJWMDVMeGtnRU9FM0FBUDBXZ29iNlEiLCJodHRwczovL2lkLmF0bGFzc2lhbi5jb20vcnRpIjoiODczY2M1MTQtZDVhNy00MjczLWFhMzktN2E2OGM4NTJhOTRlIiwiaHR0cHM6Ly9hdGxhc3NpYW4uY29tL3N5c3RlbUFjY291bnRFbWFpbERvbWFpbiI6ImNvbm5lY3QuYXRsYXNzaWFuLmNvbSJ9.cNdLhgrM8XlsZ9W-jVL3Pe8MQ-3rZf0BdVrtpmEhu_AzzB09jfdaiby8tFQCgMAvtO3rQRAwFo6QA8RrNCSDH7osm-RpFeJ0eGbLw32pmbaaVzBckXhvyMKJKVaEi2_ZyRMRn0WQGX7SNbmPBbqK40e6PLwmjxBb3xTfv7XGHHtmirNok_QccJi_OuukeGjrgqXVr95HkvhRoSAXY5WruS1RSq0zdG3DqUPLUwMQ9JR8h9rEtOkLwZmCDQxbn8HvVOGXif56i3b9t38PNsja3ELrsB2Jne3qSEeVlMOvcC5O672tijDuX5Wn-3sHmHTwCzVKWWQR1F-U8hmLXVkSyg"

$response = Invoke-RestMethod -Uri "https://api.atlassian.com/oauth/token/accessible-resources" `
    -Method Get `
    -Headers @{
        "Authorization" = "Bearer $accessToken"
        "Accept" = "application/json"
    }

$response | ConvertTo-Json -Depth 3